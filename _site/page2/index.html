<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>分享创造价值, 转播知识精华 &#8211; 云知道</title>
<meta name="description" content="分享创造价值, 转播知识精华">
<meta name="keywords" content="Docker, linux, cloud, paas, iaas, puppet">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="/images/header2.jpg">

<meta name="twitter:title" content="分享创造价值, 转播知识精华">
<meta name="twitter:description" content="分享创造价值, 转播知识精华">
<meta name="twitter:creator" content="@zliu">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="分享创造价值, 转播知识精华">
<meta property="og:description" content="分享创造价值, 转播知识精华">
<meta property="og:url" content="/page2/">
<meta property="og:site_name" content="云知道">

<meta name="google-site-verification" content="DxU8FigBXmBKSOyiIr11sF7OqgJAR0FbAxEtV3bMnks">
<meta name="msvalidate.01" content="12F570013342D1F8B60A455D09221C1D">


<link rel="canonical" href="/page2/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="云知道 Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<!-- Webfonts -->
<link href="http://fonts.useso.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-TileImage" content="/mstile-144x144.png">
<meta name="theme-color" content="#ffffff">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="/">首页</a></li>
		<li><a href="/posts/">归档</a></li>
		<li><a href="/tags/">标签</a></li>
		<li>
			<a href="#">关于</a>
			<ul class="dl-submenu">
				<li>
					<img src="/images/head-200-200.jpg" alt="Martin Liu photo" class="author-photo">
					<h4>Martin Liu</h4>
					<p>Blogger, runner, opensource fans</p>
				</li>
				<li><a href="/about/"><span class="btn btn-inverse">了解本站</span></a></li>
				<li>
					<a href="mailto:67120666@qq.com"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/zliu"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				
				
				
				<li>
					<a href="https://github.com/martinliu"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  
  
    <div class="entry-image">
      <img src="/images/header2.jpg" alt="分享创造价值, 转播知识精华">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>云知道</h1>
      <h2>分享创造价值, 转播知识精华</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-12-19T00:00:00+00:00"><a href="/container/rancher-all-in-one/">December 19, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
预计阅读时间 ~1 分钟

      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/container/rancher-all-in-one/" rel="bookmark" title="为容器而定制的超融合基础架构" itemprop="url">为容器而定制的超融合基础架构</a></h1>
    
  </header>
  <div class="entry-content">
    <p>转载自：<a href="http://rancher.com/introducing-hyper-converged-infrastructure-for-containers-powered-by-rancher-and-redapt/">Rancher Blog</a>
原文作者 Liang Sheng</p>

<p>近几年在数据中心里，超融合基础架构是最具创新的技术之一。从我听Nutanix要做“数据中心的iPhone”的比喻以后，我就成了超融合基础架构的铁粉，这家公司是这项技术的创造者。我以前经理过很多职务：Cloud.com的CEO，CloudStack创始人和Citrix公司CloudPlatform业务部门CTO，我帮助了很多想把数据中心转型到下一代云基础架构的公司和企业。最大的挑战一直是如何协调有序地把来自各种厂商的不同的技术集成到一个可靠的云平台中。超融合基础架构是这种复杂性的优雅的解决方案，这是一种简便的开机即用的基础架构消费使用体验。超融合基础架构把底层的复杂性隐藏了起来，并使数据中心的操作人员运维起来更加容易。</p>

<p><img src="/images/2015/12/converged-nodes-300x122.png" alt="逻辑架构图" /></p>

<p>典型的，超融合基础架构被用来允许虚拟机，虚拟机是当今数据中心里普遍的工作负载。然而，数据中心工作负载的类型也正在发生着变化。在去年，Docker 容器已经成为一种颇受关注的工作负载类型。因此，我们开始看到市场对为容器而定制和优化的基础架构解决方案的需求。</p>

<p>今天，<a href="http://www.businesswire.com/news/home/20151111006591/en/Rancher-Labs-Redapt-Introduce-Hyper-Converged-Infrastructure-Platform">我们Rancher团队和Redapt联合发布了容器超融合基础架构平台</a>。这个解决方案可以在数据中心里一键式地开启一套完整的容器服务平台，并集成了容器的自动化配置部署的工具。</p>

<h2 id="section">支持虚拟机和容器</h2>

<p>我们的解决方案设计为同时支持虚拟机和容器，这种实现方式是被 <a href="http://www.enterprisetech.com/2014/05/28/google-runs-software-containers/">Google使用且验证过的</a>。从今年四月开始，我们在 Rahcher VM 项目中已经尝试了这个方案，并且从很多用户那边得到了非常正面的反馈。在容器中运行虚拟机的好处是可以用相同的工具来同时管理虚拟机和容器。由于虚拟机和容器在事实上行为方式类似，我们为 Docker 容器所开发的 Rancher CLI 命令行和 UI 图形界面可以无缝地适用于虚拟机。</p>

<p>我们使用 Rancher OS 做为融合基础架构平台的基础操作系统。Rancher OS 的内核被编译成可以支持 KVM 虚拟化。下图描绘了 Rancher 和 Rancher OS 是如何共同构成了我们的超融合基础架构解决方案平台的完整软件堆栈。</p>

<p><img src="/images/2015/12/graphicv4_redaptv2.png" alt="Rancher Coverged Infrastructure" /></p>

<h2 id="section-1">容器化的存储服务</h2>

<p>所有超融合基础架构方案包含一个分布式存储的组件。通过利用到 <a href="http://rancher.com/how-rancher-storage-services-unleash-the-power-of-software-defined-storage/">我们今天的另外一项重大发布——持久存储服务</a>，这个超融合基础架构具备了独特的使用多种分布式存储的能力。用户可以自行决定部署适合他们应用的软件定义存储平台。这种方案不仅缩小了故障范围，且提高了可靠性。某个分布式存储后台的故障能造成的影响仅仅是所消费使用它的应用。</p>

<p>用户能同时部署开源和商业的存储软件，只要这些存储软件能像 Docker 容器一样的打包。我们正在把 Gluster 和 Nexenta Edge 纳入到我们的超融合基础架构平台中，并在未来计划支持更多的存储产品。</p>

<p><img src="/images/2015/12/converged-infrastructure-for-containers.png" alt="Storage Services" /></p>

<h2 id="docker-">引入Docker 镜像生态系统</h2>

<p>成功的超融合基础架构方案，通常会以运行流行的应用工作负载为目标，如数据库或者虚拟桌面。Docker 生态系统为 Rancher 超融合架构方案提供了可以运行的丰富的应用。仅拿 Docker Hub 举例，它提供了成千上万的 Docker 镜像。另外，Rancher 不仅让运行单个容器变得很容易，它更可以通过 Compose、Swarm 和 Kubernets 来调度和部署大规模的应用群集。Rancher Labs 完成了一组流行的DevOps工具的认证和打包。用户可以一键式地部署一个完整的ELK群集到超融合架构上。
<img src="/images/2015/12/catalog1-1024x438.png" alt="应用商店" /></p>

<h2 id="redapt">我们与Redapt成为合作伙伴</h2>

<p><img src="/images/2015/12/redaptlogo-300x101.png" alt="Redapt logo" /></p>

<p>我们与Redapt已经认识并且工作在一起已经多年了。早在2011年，我在 Cloud.com 的团队与Redapt合作，用CloudStack共同搭建了当时最大的私有云，由超过40000台物理服务器构成。我们对他们的技术能力、创新能力和专业性感到非常钦佩。构建一个超融合基础架构方案需求软件厂商和硬件厂商之间的密切协作。我们很幸运地再次与Redapt携手，共同为市场打造专门为容器方案定制的首款超融合基础架构。</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-10-04T16:00:00+00:00"><a href="/container/docker-is-not-enough/">October 04, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
预计阅读时间 ~4 分钟

      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/container/docker-is-not-enough/" rel="bookmark" title="仅Docker还不够" itemprop="url">仅Docker还不够</a></h1>
    
  </header>
  <div class="entry-content">
    <p>If you’re here, you might know about docker, if you don’t know about docker, please refer to the following articles, videos and slides about docker, which might capture your interest [0].</p>

<p>This article is not about docker, it’s more about the Co., the eCosystem around docker and dockerization of your apps, services and last but not least about bringing the DevOps style and a new way of thinking to your business.</p>

<p><img src="/images/2015/10/docker-is-not-enough.png" alt="" /></p>

<p>The following list below provides an overview of the Co., the eCosystem around docker, which for sure is not complete and is intended only as a reference for my own observation and research about these systems and why the eCosystem around docker is embracing and integrating docker and how we can use and combine them together for different use cases.</p>

<p>So let’s have a look on this short list:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Ansible &amp; Docker
Amazon EC2 &amp; Docker
Apache Brooklyn &amp; Docker
Apache Hadoop &amp; Docker
Apache Storm &amp; Docker
AppScale &amp; Docker
Atomic Hosts &amp; Docker
Chef &amp; Docker
Clocker &amp; Docker
Cloud &amp; Docker
Cloud Foundry &amp; Docker
CloudStack &amp; Docker
CoreOS &amp; Docker
Deis &amp; Docker
Decker &amp; Docker
Docker &amp; Docker
Dokku &amp; Docker
Eucalyptus &amp; Docker
Flynn &amp; Docker
Google Compute Platform &amp; Docker
IBM Bluemix &amp; Docker
Kubernetes &amp; Docker
Mesos &amp; Docker
Mesosphere &amp; Docker
Microsoft Azure &amp; Docker
OpenCamp &amp; Docker
OpenShift &amp; Docker
OpenStack &amp; Docker
Panamax &amp; Docker
Puppet &amp; Docker
SaltStack &amp; Docker
Shipyard &amp; Docker
Stackato &amp; Docker
Tsuru &amp; Docker
VMware &amp; Docker
</code></pre>
</div>

<p>As we can see, these eCosystems have Docker in common, but you might ask if and how all these implement the integration and enhance their own system with Docker and play with others and which of them might be the right solution for different use cases, i.e. to build (web-) apps, services or a whole cloud platform to provide for instance SaaS offerings or to help to achieve higher density in data centers and control the VM sprawl, etc..</p>

<p>Well, first I’m going to classify these eCosystems in the following categories:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Big Data
Cloud Platform
IaaS
Data Center Operating System
Docker Operating System
Docker Management
PaaS
Orchestration and Configuration Management Engines
</code></pre>
</div>

<p>which leads to the following table matrix:</p>

<p><img src="/images/2015/10/docker_and_co.png" alt="" /></p>

<p>One row, one column and one cell might capture your eye here and someone might argue that “Docker &amp; Docker” doesn’t make any sense and why I’m classifying docker as IaaS, PaaS, Docker OS and as an Orchestration and Configuration Management Engine all together, well if we agree with the fact that we can build our IaaS and PaaS with docker and we can leverage the docker engine to orchestrate itself and run docker containers in docker containers, then I guess you’ll agree with this view.</p>

<p>The other interesting point is the PaaS column, which shows that most of these eCosystems are trying to address the PaaS challenge in different ways with docker. But as Ben Gloub, CEO of Docker Inc. states in [15] “a lot of people are questioning whether they really need a full PaaS to build a flexible app environment” and exactly here enterprises need to re-think thier strategies, whether they need to use Macro PaaSes such as Cloud Foundry or OpenShift, or should they build more efficient lightweight custom PaaS solutions with docker and the ecosystem arround it, we refer to such a custom made PaaS solution as OpenCamp, the Open Cloud Application Management Platform.</p>

<p>But what about the one cell, what is Mesos or Mesosphere and what is a “Data Center Operating System”? Well, that’s the new way of thinking, which I’m going to address in my next blog post.</p>

<p>But for now, if you ask me which of these systems are my favorites, I’d say Docker followed by Mesosphere, OpenStack, Kubernetes, Panamax and Deis!</p>

<p>Last but not least, I’d like to invite you to have a look on why “Docker Is Not Enough”.</p>

<p>[0] Docker related articles</p>

<p>[1] Introduction to Docker by Solomon Hykes, Docker Founder and CTO at Docker Inc.
https://www.youtube.com/watch?v=Q5POuMHxW-0</p>

<p>[2] What is Docker
https://www.docker.com/whatisdocker/</p>

<p>[3] WHAT IS DOCKER AND WHEN TO USE IT
http://www.centurylinklabs.com/what-is-docker-and-when-to-use-it/</p>

<p>[4] How Docker Was Born | Leanstack
http://blog.leanstack.io/how-docker-was-born</p>

<p>[5] How Docker Fits Into The Current DevOps Landscape
http://blog.leanstack.io/how-docker-fits-into-the-current-devops-landscape</p>

<p>[6] Crash Course: Next Generation Servers With Containers by Sébastien Han:
http://www.sebastien-han.fr/blog/2014/02/03/crash-course-next-generation-servers-with-containers/</p>

<p>[7] Docker drops LXC as default execution environment
http://www.infoq.com/news/2014/03/docker_0_9</p>

<p>[8] The key differentiators of Docker technology by Pethuru Raj
http://thoughtsoncloud.com/2014/09/docker-managing-excitement/</p>

<p>[9] Docker is the Heroku Killer
http://www.brightball.com/devops/docker-is-the-heroku-killer</p>

<p>[10] KVM and Docker LXC Benchmarking with OpenStack
http://bodenr.blogspot.de/2014/05/kvm-and-docker-lxc-benchmarking-with.html</p>

<p>[11] VMware buys into Docker containers
http://www.zdnet.com/vmware-buys-into-docker-containers-7000032947/</p>

<p>[12] 4 ways Docker fundamentally changes application development
http://www.infoworld.com/article/2607128/application-development/4-ways-docker-fundamentally-changes-application-development.html</p>

<p>[13] The Docker exploit and the security of containers
https://blog.xenproject.org/2014/06/23/the-docker-exploit-and-the-security-of-containers/</p>

<p>[14] OpenShift v3 Platform Combines Docker, Kubernetes, Atomic and More
https://www.openshift.com/blogs/openshift-v3-platform-combines-docker-kubernetes-atomic-and-more</p>

<p>[15] Simplifying and securing multicloud development</p>

<p>http://www.pwc.com/en_US/us/technology-forecast/2014/issue1/interviews/interview-ben-golub-docker.jhtml</p>

<p>[16]  OpenStack &amp; Docker</p>

<p>https://wiki.openstack.org/wiki/Docker</p>

<p>[17] Docker Jump Start by Andreaw Odewahn</p>

<p>https://github.com/odewahn/docker-jumpstart-source</p>

<p>From : https://www.cloudssky.com/en/blog/Docker-Is-Not-Enough/</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-10-04T16:00:00+00:00"><a href="/cluster-management/why-microsoft-want-to-buy-mesophere/">October 04, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
预计阅读时间 ~1 分钟

      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/cluster-management/why-microsoft-want-to-buy-mesophere/" rel="bookmark" title="为什么微软欲10亿收购Mesosphere" itemprop="url">为什么微软欲10亿收购Mesosphere</a></h1>
    
  </header>
  <div class="entry-content">
    <p>具报道微软正在和一家快速增长的云计算创业公司 <a href="https://mesosphere.com/">Mesosphere</a> 商讨并购事宜。根据湾区行业媒体 “The Information” 记者 Amir Efrati 的报道，这家创业公司目前估值接近10亿美元。</p>

<p>交易的细节目前还不清楚 —— 记者没有说明交易进行到哪个阶段，也没有说明微软内部对于这个估值的态度。 Mesosphere 和微软都对这个消息表示无可奉告。</p>

<p>让微软开出如此天价的除了 Mesosphere 的技术，最近硅谷对于软件定义的数据中心的热情肯定也是个因素。数十亿美元的热钱涌入这个领域，创业公司门前排满了传统 IT 巨头，谁也不想在制定行业标准和抢占行业制高点方面丢了先机。到底 Mesosphere 到底是何方神圣，为何能十亿级别估值？</p>

<h2 id="mesosphere-">Mesosphere 这个公司是干啥的？</h2>

<p>作为一家飞速增长的创业公司，自 2013 年来 Mesosphere 专注于围绕开源软件 Apache Mesos 开发产品和服务。Twitter 这样的巨头为了应对集群的飞速膨胀，借助 Mesos 将数以千计的服务器整合地像使用一台电脑，同时还管理运行这台“电脑”中成千上万的任务。 另外一家独角兽公司 Docker，则支持将他们火爆的容器产品部署到 Mesos 集群中。Docker 依靠其简单灵活的容器产品一夜成名，开发者终于能够在统一的环境中开发、测试和发布应用，将过去数周的工作缩减到几个小时。Yelp 这样的巨头就将 Mesos 和 Docker 组合起来，使用 Mesos 将整个数据中心变成一个资源池，然后通过 Docker 将应用部署到整个集群。</p>

<p>类似其他提供基础设施和数据的管理软件的创业公司，Mesosphere 也来自真正拥有“大数据”的门派。CEO Florian Leibert 在独立创业之前，曾经是 Airbnb 和 Twitter 的技术负责人（就连巨头 Google 内部也有一个功能类似 Mesos 的管理平台 Borg）。Leibert 将 Mesos 引入了 Airbnb，这样技术团队可以轻松地在其上搭建 Spark 大数据运算系统。</p>

<p>今年春天在一次福布斯杂志采访中，Leibert 告诉记者他们的产品能让数据中心非常容易管理，不论里面有五台还是五千台机器。一个佐证是掌管着 Twitter 数千台服务器仅仅是屈指可数的几位运维工程师。</p>

<p>说起他们创业最苦逼的事情，Leibert 苦笑道 “怎么和大家说明白我们是干啥的”。最后总结成一句话，让你们服务器的利用率提高两三倍。</p>

<h2 id="section">微软 看上她哪点了？</h2>

<p>从微软的角度来说，通过并购获得 Mesos 技术，就能够迅速在这一波软件定义的基础设施大潮中站稳脚跟。之前 LinkedIn 已经天使投资了另外一家相同领域的创业公司 Confluent，Google 和 IBM 则联合 Docker、Mesosphere 一起来制定新的容器标准（Open Container Project），微软至今毫无建树。正如 Efrati 在他的访谈中提到，虽然微软已经参与了 Docker 项目，但在上述大领域中还没有能占一席之地的项目。</p>

<p>大家不要忘记，六月份的时候坊间曾经流传微软要并购 Docker。根据微软的风格，在做出并购决定之前，还会仔细评估这些创业公司一阵。</p>

<p>2014年底，Mesosphere 得到了 Khosla Venture 的3600万美元B轮融资，之前A轮则是由 Andreessen Horowitz 领投。根据 Pitchbook 的数据，Mesosphere 的 A 轮估值约为 4500 万美元，B 轮之后增加到数亿美元。同期 Docker 公司经过 C 轮融资估值达到 4 亿美元，随后四月份更是加入了独角兽俱乐部（十亿美元）。</p>

<p>虽然我们现在还不确定未来 Docker 被巨头并购时的估值，但是 Mesospher 如果能够比 Docker 成长地更快，那么虽然盈利不大，但足以让它的估值从一亿美元猛增到十亿美元（在新兴产业领域，人们对增长速度的关注远远高于现实盈利）。如果最终证实了 The Information 报道的估值，也算是个合情合理的价格。</p>

<p>大家都拭目以待的是微软是否真的下定决心在这个新兴领域放手一搏，就算竞争对手已经找好了同盟军。当然大家也关心 Mesosphere 是否现在就想卖，即使这个估值听起来已经不太小。</p>

<p>来自：2015-08-19 福布斯记者 Alex Konrad
http://www.forbes.com/sites/alexkonrad/2015/08/18/why-microsoft-could-reportedly-want-to-buy-cloud-startup-mesosphere-even-at-1-billion/#rd</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-10-03T16:00:00+00:00"><a href="/container/china-docker-service-product-overview/">October 03, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
预计阅读时间 ~1 分钟

      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/container/china-docker-service-product-overview/" rel="bookmark" title="国内Docker服务和产品初探" itemprop="url">国内Docker服务和产品初探</a></h1>
    
  </header>
  <div class="entry-content">
    <h2 id="section">各家产品感受</h2>

<p>我知道的Docker创业团队一共五个：DaoCloud、cSphere、Alauda、TenxCloud、DataMan，除了最后一个数人重点在Mesos+Docker，没找到在线试用的门路，其它几个都初步试了一下，下面分别说明。</p>

<p>说明：Docker相关产品变化很快，我只能说自己试用时的情况，在文章发出后读者看到的功能可能会有所不同</p>

<h2 id="daocloud">DaoCloud</h2>

<p>似乎不能直接用 hub.docker.com 上的镜像制作服务集成只能依赖源码中或者线上编写的 docker-compose.yml ，对线上操作有些不便有些时候访问比较慢在有限的几次操作中，发现构建速度比 alauda 快一开始没找到提 bug/issue 的地方，后来找到后觉得界面融合的很好只能部署在自己注册的宿主机上，好处是可以保持控制力，缺点是缺省没有跨主机的部署方案集成测试仅仅是一个容器内玩点脚本，如果想要做微服务的集成似乎不可行。</p>

<h2 id="csphere">cSphere</h2>

<p>系列培训做的很不错，但是每一次时间有些长，对学习者的要求比较高，建议切割成几部分提供了一个完整的产品可以用于自己搭建，用户容易有掌控感安装很简单，交付的产品上手很容易（同类产品没有找到安装私有云环境的方法）不知道如何进行跨单机的容器协作有些小问题需要处理（比如 web 界面上 hostname 同名时的选择问题），但没有源码无法提 patch 以机器/容器视角进行管控，显得抽象不足，期望是结合 compose 以镜像/服务视角进行管理。</p>

<h2 id="alauda">Alauda</h2>

<p>不知道LB用的是什么方案？是否能跨机操作构建时选择国内和国际两种情况比较赞，有些镜像是在国内构建比较快提供存储卷服务，便于应用服务编排，但是不知道如何跨机构建服务，设定环境变量值的时候需要设置一个较长的字符串（secret seed），结果显示不太好看缺省的服务数量有上限，最多 4 个服务，2 个 cpu工单系统看上去有点low，如果不能做漂亮，不如学csphere直接搭一个开源论坛进行互动。</p>

<h2 id="tenxcloud">TenxCloud</h2>

<p>字体比灵雀云好看些，比较舒心与 DaoCloud 类似，也不能直接用 hub.docker.com 上的镜像制作服务获取github上的项目列表时有数量限制，已经修复不能获取源码仓库的分支内容，已经修复构建系统支持国际/国内节点的区分构建系统可以选择程序类型，感觉这个功能会成为鸡肋对 IAAS 厂商仅支持AWS，期待支持 qingcloud、ucloud、aliyun 服务编排的 UI 界面看似很好，但其实用处不大</p>

<h2 id="docker">对Docker服务的整体探讨</h2>

<p>从知道Docker这个产品开始，我就一直期望Docker能够为软件/互联网企业带来一些有价值的东西。现有的场景下，Docker既是一个软件，又是一个技术生态，围绕这一技术，各家公司都在努力解决Docker集群的管理问题，希望为软件和互联网企业带来价值，而具体做法各有异同。</p>

<p>下面进行一些综合性质的讨论，为了方便，我们把基于docker技术来管理镜像、构建过程和各种服务编排的平台称为Docker云平台。</p>

<h3 id="section-1">产品形态</h3>

<p>目前主要有两种产品交付方式——</p>

<ol>
  <li>开发 Docker 云平台，以 image 交付产品，支持用户自建 Docker 管理集群，公司提供培训和软件咨询服务</li>
  <li>在线提供 Docker 云平台，以 SaaS 形式交付服务，底层可以使用 IaaS 服务，通过用户账号接入其它 IaaS 平台</li>
</ol>

<p>前一种可以给予用户更多的掌控，但从长远考虑，如果由客户自己运维Docker云平台，势必需要一个专业的运维团队，这会给企业带来很大的运作成本，所以前一种方式仅仅有利于客户培养，未来应该以后一种方式为主。</p>

<p>后一种方式的主要代价是企业不好控制自己的数据安全，后来了解到的一种办法是使用所谓的 hosted private cloud ，这样企业仍然需要做一些基础运维工作，但是主要局限于软件环境，可以看做是安全和成本的一种平衡。</p>

<h3 id="section-2">网络解决方案</h3>

<p>Docker 由于其轻量级的特点，很容易就可以在一个宿主机上运行多个容器，这使得我们可以用低廉的成本在单机上进行分布式集成测试，但这是研发和测试的需求，线上的着眼点必然要支持跨宿主机，以支持包括弹性扩容之类的运维能力。</p>

<p>目前已知的网络方案尚无公认的最佳实践，我看到的方式大都还是以 bridge+NAT 为主，这块期待突破，也希望了解各家 Docker 团队对 Swarm 的支持。</p>

<h3 id="section-3">服务编排</h3>

<p>服务编排是 Docker 类应用从玩具到真正系统的一个分水岭，但是各家支持不尽相同。</p>

<ul>
  <li><strong>不支持</strong> 仅支持Docker的单个容器视角，这样会让用户把Docker当做简化的虚拟机来使用，特别是功能菜单也类似IaaS系统的信息结构时。</li>
  <li><strong>简单支持</strong> 借助 Docker Compose ，在同一个宿主机上使用 docker-compose.yml 文件做服务编排，未来也可以借助 swarm + compose 组合跨越宿主机。</li>
  <li><strong>较高级功能支持</strong> 将 compose 中的各种要素进行拆解，用户使用web表单提交需要的编排方式，这个做法简化了用户编写 yaml 文件的工作，但是需要对 compose 的信息结构进行消化，使之适应 web 表单的展现方式。</li>
</ul>

<p>服务编排的结构对线上和开发测试可能有所差异，所以有一种做法是对不同的环境编写不同的 yaml 文件，但我对这个做法持保留态度，因为这会让各种环境的一致性受到破坏。</p>

<p>目前比较好的做法可能是分析 yaml 文件中的服务依赖，然后利用 external_links 建立对外部资源的依赖，而在不同的环境下，自然有不同的外部资源来提供。</p>

<h3 id="section-4">存储解决方案</h3>

<p>docker 本身应该是无状态服务，所以状态的管理非常重要，通常做法是在宿主机上提供挂载卷，由 docker 云平台提供存储迁移和备份服务，这应该是 docker 云平台的一个重要功能。</p>

<h3 id="section-5">跨越地理节点</h3>

<p>这里指的是跨机房协作，通常仅与线上运维相关，而与开发和测试关系不大。</p>

<p>这块工作对 Docker 云平台有所要求，若要协作不同机房的 docker 容器，势必需要一个建立在公共域的管控中心，那么安全策略和模型、网络管理方式都会与同网段宿主机群的时候大为不同。</p>

<p>同网段宿主机群是可以互相网络可达的，所以一般是这样：</p>

<p>Host A &lt;–(控制)— Controller Node
Host B &lt;–(控制)—
Host C &lt;–(控制)—</p>

<p>跨机房的时候，控制中心通常不能直连宿主机群，所以需要变通：</p>

<p>Host A —(agent上报，查询并执行命令) –&gt; Controller Node
Host B —(agent上报，查询并执行命令) –&gt;
Host C —(agent上报，查询并执行命令) –&gt;</p>

<p>当然，如果对自己的控制链路有信心，我其实更倾向于免agent的方案，即将sshd看做缺省就有的agent，只是在每个机房留一个broker即可，好处是减少对宿主机的干预和维护成本。</p>

<p>Host A &lt;–(管控)– Broker –(查询并执行命令) –&gt; Controller Node
Host B &lt;–(管控)—
Host C &lt;–(管控)—</p>

<p>实践中的这块情况了解有限，目前仅知道 Mesos 是模式一，因此不能跨机房，而k8s是模式二，可以很容易的跨越机房和IaaS服务商。</p>

<p>文章来源：<a href="http://dockone.io/article/707">http://dockone.io/article/707</a></p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-10-01T16:00:00+00:00"><a href="/container/uninofs-storage-volume-faq/">October 01, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
预计阅读时间 ~4 分钟

      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/container/uninofs-storage-volume-faq/" rel="bookmark" title="FAQ： 关于 Union Filesystems, Storage 和 Volumes" itemprop="url">FAQ： 关于 Union Filesystems, Storage 和 Volumes</a></h1>
    
  </header>
  <div class="entry-content">
    <h2 id="docker-image-">Docker image 是分层的意味着什么?</h2>

<p>It literally means that a docker images is built on layers. Each layer represents a portion of the images file system that either adds to or replaces the layer below it. For instance you might start with a Debian image, and then add Emacs, and the Apache. Finally, when you instantiate a container a final read-write layer to capture any changes that are made to the container.</p>

<h2 id="union-file-system-">Union file system 是什么?</h2>

<p>A union file system is a file system that amalgamates a collection of different file systems and directories (called branches) into a single logical file system.</p>

<h2 id="unionfs-">UnionFS 是分布式文件系统么？</h2>

<p>No, it is not.</p>

<h2 id="docker-storage-drivers--volumes-">Docker Storage Drivers 和 Volumes 是一回事么？</h2>

<p>No, they are actually quite different.</p>

<p>A storage driver is how docker implements a particular union file system. Keeping with are “batteries included, but replaceable” philosophy, Docker supports a number of different union file systems. For instance, Ubuntu’s default storage driver is AUFS, where for Red Hat and Centos it’s Device Mapper.</p>

<p>A volume is subdirectory in a container’s file system that exists outside of the union file system.  Unless you explicitly commit changes made to a Docker container during run time to a new image, they are lost when the container is destroyed. Volumes, by contrast, will not be automatically deleted when a container is removed (you can, of course, tell Docker to remove any volumes when removing a container).</p>

<h2 id="nfs">用NFS共享卷作为容器的卷有什么问题么？</h2>

<p>Not really. This is a pretty common scenario.</p>

<h2 id="dockerimage">如何将更新后的Docker容器导出为可以重用的新的Image？</h2>

<p>You can do this by using docker commit. In an example where you have a container named “mywebsite” the following command would create a new image named “mikegcoleman\mynginx” from that container</p>

<div class="highlighter-rouge"><pre class="highlight"><code>docker commit mywebsite mikegcoleman<span class="se">\m</span>ynginx
</code></pre>
</div>

<h2 id="section">如何对容器做安全加固？</h2>

<p>Visit the Docker Security resource center to get access to tools and best practices in securing your Docker implementation.</p>

<h2 id="ram--cpu">如何配置容器对(RAM 和 CPU)资源的用量？</h2>

<p>CPU and RAM can be configured via the docker run command. You can read about memory here, and CPU here.</p>

<h2 id="rhel-based-image-">我想用 RHEL based image 怎么办？</h2>

<p>Red Hat hosts a variety of docker images, but you must be a Red Hat subscriber to access them.</p>

<h2 id="rhel-containers-vs-docker-containers-">RHEL containers vs. Docker containers 他们的区别？</h2>

<p>The Docker engine that runs on Red Hat Enterprise Linux (RHEL), offers the same functionality as the Docker engine running on any other Linux distribution. Additionally, If you are a Red Hat subscriber, you can run RHEL inside of a container on any host running Docker engine.</p>

<h2 id="solaris-os--docker--centos">如果，我用 Solaris OS 运行 Docker 是支持的, 这意味这我能用来跑CentOS的容器么？</h2>

<p>We are working with Oracle to implement Docker with <a href="https://blog.docker.com/2015/08/docker-oracle-solaris-zones/">Solaris Zones</a>, but this funcitonaity is not yet generally available. When it does ship, however, it will allow Docker to run Solaris workloads on Solaris, but it won’t allow to run Linux workloads on Solaris. Similarly, the Docker Engine that will run on Windows when Microsoft ships its container support with Windows Server 2016 will run Windows workloads, not Linux workloads.</p>

<p>That being said, the Illumos kernel has support for a feature called “BrandZ,” which allows running Linux binaries on the Illumos kernel. Joyent’s Triton product leverages on this feature to run Linux containers on their SmartDataCenter platform, which uses the Illumos kernel.</p>

<h2 id="oracle-12g-rac---fencing-docker">少数象 Oracle 12g RAC 这样的应用需要动态的调整 内核参数，而且有 fencing 的概念，Docker将会支持么？</h2>

<p>It might work, but it’s not something we advocate as  a good use case. Docker is designed for microservices or distributed applications. Each container should, ideally, perform a single function. You tie those containers together to create complex applications. Large monolithic applications like Oracle, are not a particularly good use case for containers.</p>

<h2 id="web--glusterfs-">当运行10个Web容器，如何为他们设置共享文件系统数据，例如上传的文件？ 能用类似 GlusterFS 的文件系统么？</h2>

<p>Without knowing more specifics on the use case, it’s hard to say exactly what the best approach would be. However, using a shared data-only container with volumes mounted to house the shared data would be a good place to start.</p>

<p>As for Gluster, I’m not sure it’ll solve the problem you’re trying to solve by itself. That being said, customers have deployed Docker volumes to GlusterFS with success. Just make sure you understand the characteristics of the file system – in particular how to tune it appropriately.</p>

<h2 id="section-1">如果你去配置和映射一个本地目录作为容器的一个卷，当你需要让这个应用上生产环境，最佳实践是什么？</h2>

<p>The app code should be copied into the Docker image. The idea is that your Docker image includes everything the app needs to execute including the code and any libraries or dependencies.</p>

<h2 id="data-only-containers--host-mounting-">由于 data-only containers 依然存储数据在运行的主机上，为什么这还是会比 host-mounting 方式要好？</h2>

<p>Host mounting  ties the volume mount point to one specific Docker host. With data-only containers, the volume is mounted to a container, and that abstraction works across different Docker hosts.</p>

<p>Wouldn’t a data container suffer from the same problem as writing data to a container over time? I.e. the build up of diffs may cause longer look up times due to folder traversal.</p>

<p>When we talk about data-only containers, we talk about them in the context of hosting a volume in that container. Since we’re using a volume, it bypasses the union file system, and isn’t affected by some of the performance issues.</p>

<h2 id="section-2">备份和版本控制的最佳实践是什么？</h2>

<p>These are pretty broad topics, but I’ll give a couple quick answers with the fact that we’re doing a session on October 27th that will talk about backups in pretty good detail.</p>

<p>Part of the reason for storing your data in volumes is it makes it fairly trivial to backup. Information on the hows and whats can be found in the Docker documentation.</p>

<p>As for version control, I’m not exactly sure what you mean, but I’ll take a crack at it anyway. As a best practice we recommend using Dockerfiles to control the creation of new Docker images. Those Dockerfiles should be stored in GitHub, and treated like any other source code. Additionally, when images are pushed to a registry, they can be tagged with a version number so you can keep older versions around or be explicit about which version you wish to use in the future.</p>

<p>来源：<a href="http://blog.docker.com/2015/10/docker-basics-webinar-qa/">http://blog.docker.com/2015/10/docker-basics-webinar-qa/</a></p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    
      
        <li><a href="" class="btn">前一页</a></li>
      
    

    
    
      <li><a href="">1</a></li>
    

    
    

    
    
    

    
      
        <li><strong class="current-page">2</strong></li>
      
    
      
        
        
        
        <li><a href="/page3/">3</a></li>
      
    

    
    

    
      <li><a href="/page4/">4</a></li>
    

    
    
      <li><a href="/page3/" class="btn">下一页</a></li>
    
  </ul>
</div>


</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2016 Martin Liu. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>

  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.useso.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-77731594-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>


          

</body>
</html>