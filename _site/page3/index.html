<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>转播精选知识，分享创造价值 &#8211; 云知道</title>
<meta name="description" content="转播精选知识，分享创造价值">
<meta name="keywords" content="Docker, linux, cloud, paas, iaas, puppet">



<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="转播精选知识，分享创造价值">
<meta property="og:description" content="转播精选知识，分享创造价值">
<meta property="og:url" content="/page3/">
<meta property="og:site_name" content="云知道">

<meta name="google-site-verification" content="P5Mx6koxG0P8KPpIBwdfg5B88CeTyLpLoNMMzqQgYSg">
<meta name="msvalidate.01" content="12F570013342D1F8B60A455D09221C1D">


<link rel="canonical" href="/page3/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="云知道 Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.useso.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="/">首页</a></li>
		<li><a href="/posts/">归档</a></li>
		<li><a href="/tags/">标签</a></li>
		<li>
			<a href="#">关于</a>
			<ul class="dl-submenu">
				<li>
					<img src="/images/head-200-200.jpg" alt="Martin Liu photo" class="author-photo">
					<h4>Martin Liu</h4>
					<p>Blogger, runner, opensource fans</p>
				</li>
				<li><a href="/about/"><span class="btn btn-inverse">了解本站</span></a></li>
				<li>
					<a href="mailto:67120666@qq.com"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				
				
				
				
				<li>
					<a href="https://github.com/martinliu"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  
  
    <div class="entry-image">
      <img src="/images/header2.jpg" alt="转播精选知识，分享创造价值">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>云知道</h1>
      <h2>转播精选知识，分享创造价值</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-09-30T16:00:00+00:00"><a href="/container/containers-101-bob-reselman/">September 30, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
预计阅读时间 ~1 分钟

      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/container/containers-101-bob-reselman/" rel="bookmark" title="Container 101 - Bob Reselman" itemprop="url">Container 101 - Bob Reselman</a></h1>
    
  </header>
  <div class="entry-content">
    <p>阅读提示：在看一些翻译文章的时候，需要看看是什么人？什么时候？在那里发布的文章？为什么发布这个文章？特别是对不熟悉的作者还是有必要去linkedin查一下这个人的工作记录，曾经的就职情况，曾经的出版物主要有那些？以上都是看看此人的江湖地位和背景，主要是看它写文章是否带有某种立场和角度；这年头毕竟枪文太多，还是需要有防胡悠的意识。</p>

<p>作者简介：Bob Reselman 目前是Edmunds公司的技术流程架构师。Edmunds公司是一家知名发布商，专门发布高容量、高可用性、最先进的、基于Java的网站，这些网站专门面向汽车消费者。</p>

<p><img src="/images/2015/10/Bob-Reselman.jpg" alt="Bob Reselman" /></p>

<ul>
  <li><a href="https://www.linkedin.com/in/bobreselman">Linkedin profile</a></li>
</ul>

<p>本文正文的出处：<a href="http://www.developer.com/design/containers-101.html">http://www.developer.com/design/containers-101.html</a> 下面是云头条的中文翻译。</p>

<p>大概六个月前，我就开始注意到业界在容器方面的动静很大，容器被誉为是一种处理虚拟计算的新方法。我生性喜欢探究新技术，于是这几个开始研究容器技术的细枝末节。我可以告诉各位的是，容器是不会很快销声匿迹的一项重要技术。这个领域有许多玩家，新厂商一直在涌进来。如果你是与时俱进的开发人员，学会使用容器是职业生涯中必不可少的技能。</p>

<p>所以，本着倡导一种优秀技术概念的宗旨，我想回答下列问题，为各位介绍容器技术的基本知识：</p>

<ol>
  <li>何谓容器？</li>
  <li>容器有何特别之处？</li>
  <li>该如何使用容器？</li>
</ol>

<p>我希望，回答这些问题后，你对容器有一个基本的了解和认识，以便开发和部署代码时可以开始使用容器。</p>

<p>还是言归正传吧。</p>

<h2 id="section">何谓容器？</h2>

<p>容器技术是通过使用主机上的隔离进程，建立虚拟环境的一种方法。这种隔离进程就叫容器，它有自己的一套文件系统资源和从属进程。容器不会侵扰主机系统，主机系统也不会侵扰容器。</p>

<p>容器在主机内核上运行（见图1）。一个名为容器管理器的组件确保容器可以在主机上运行（文章后面对容器管理器会有详细介绍）。</p>

<p><img src="/images/2015/10/Contain1.jpg" alt="图1：" /></p>

<ul>
  <li>图1：容器提供了运行孤立进程的功能，孤立进程在共享环境下有自己的资源。</li>
</ul>

<h2 id="section-1">容器有何特别之处？</h2>

<p>想了解什么让容器如此特别，我们就需要审视虚拟机这个概念。虚拟机是一个模拟计算机的软件。虚拟机的优点在于，可以大大提高使用硬件的效率。你可以让好多虚拟机在单单一个硬件上运行（见图2）。</p>

<p><img src="/images/2015/10/Contain2.gif" alt="图2" /></p>

<ul>
  <li>图2：如果你使用虚拟机，针对每个虚拟机的资源分配是固定的。</li>
</ul>

<p>然而，虚拟机技术有其缺点。不妨看一下图2。你会注意到，在图中，三个虚拟机在一台计算机上运行，该计算机配备48 GB内存、12核处理器和3TB磁盘存储空间。每个虚拟机被分配了16 GB内存、4核和1TB存储空间。到目前为此很好。但是这里有个缺点。无论任何一个虚拟机使用它的全部资源，还是只是一小部分资源，硬件分配是静态的。换句话说，如果其中一个虚拟机使用的内存从不超过1GB，只存储100MB的文件系统，该虚拟机仍占用4 GB内存和整整1TB的存储空间，尽管该虚拟机只使用25%的内存和1%的存储空间。这就不太好。</p>

<p>另一方面，容器并不死死占用资源。你构建一个容器时，不用为它分配内存、处理器或存储空间。事实上，容器以共享方式使用主机上的内存、处理器和存储空间。只要物理机处理得了，可以将好多个容器装入到该物理机上。容器只有在需要资源时才占用所需的那部分资源。不存在资源分配是固定的说法。</p>

<p>好处不止这些。运行容器的硬件通常使用轻量版Linux作为操作系统。这个轻量级主机操作系统提供了内核级服务。CoreOS是流行的主机操作系统之一。还有其他主机操作系统，比如Ubuntu Snappy和Red Hat Atomic。</p>

<p>你在构建容器时，可以添加所选择的操作系统；比如说，你想使用Ubuntu。容器里面的Ubuntu操作系统会充分利用主机内核，不过会有属于Ubuntu一部分的程序包。比如说，虽然内核对软件包管理一无所知，但Ubuntu会提供软件包管理工具apt-get。此外，你可以配置容器，以便使用特殊的Web服务器和脚本解释器等等。结果就是，你获得了虚拟机提供的环境配置，又不因静态分配而死死占用主机系统上的资源。另外，容器会有一个主机里面可见的IP地址。因而，主机可以通过容器的IP地址，直接访问容器（见图3）。</p>

<p><img src="/images/2015/10/Contain3.jpg" alt="图3" /></p>

<ul>
  <li>图3：容器共享主机资源，并充分利用主机操作系统提供的内核级服务。</li>
</ul>

<h2 id="windows">附文：使用Windows怎么样？</h2>

<p>容器面临的一个约束是，无法混合搭配多个操作系统。在虚拟机领域，让Windows主机支持运行Linux的虚拟机或者让OS X系统运行Windows虚拟机相当常见。而容器就不是这样了；原因是，就本身而言，容器使用主机内核。因而，你要做到操作系统相互匹配。也就是说，Linux容器在Linux主机上运行。你可以在Windows Server（直至Windows Server 2016）上运行Windows容器。另外，还有Windows版的容器管理器：Docker。</p>

<p>要是你发现自己需要在Windows上运行Linux容器，总是可以在Windows下启动Linux虚拟机，使用Linux虚拟机作为主机系统。</p>

<h2 id="section-2">该如何使用容器？</h2>

<p>为了使用容器，你就要明白三个概念。第一个概念是容器管理器。第二个是了解容器层架构。第三个是容器注册中心。</p>

<h3 id="section-3">容器管理器</h3>

<p>容器管理器是一种工具，可用来构建容器、部署容器，让容器在主机上运行。截至本文截稿时，市面上最流行的容器管理器是Docker和Rocket。</p>

<p>容器管理器的工作方式如下：假设你用PHP编写了一个短小的Hello World Web应用程序。你要创建一个容器配置文件，你会在其中描述应用程序所需的PHP文件。同样在该配置文件中，你要定义应用程序所需的各层。在这里，假设你的应用程序需要PHP 5.6解释器，你想要在Apache网站服务器下运行。到时就可以通过容器管理器，发出命令来运行你的应用程序。容器管理器在后台会执行这些操作：</p>

<ol>
  <li>读取配置文件，确定需要从注册中心获得的各层；</li>
  <li>创建容器映像；</li>
  <li>添加应用程序源文件；以及</li>
  <li>在主机上启动容器（见图4）。</li>
</ol>

<p><img src="/images/2015/10/Contain4.jpg" alt="图4" /></p>

<ul>
  <li>图4：配置文件、映像和注册中心都是容器生态系统的一部分。</li>
</ul>

<p>听起来觉得很简单？你可能会问：“层是什么？映像是什么？注册中心是什么？怎么回事？”这些问题提得好，有必要回答。下面我就逐一回答。</p>

<h3 id="section-4">了解层和映像</h3>

<p>容器由一个个层组成。层就是容器映像（没错，容器由其他容器组成这个概念一开始可能让人困惑）。可能先是操作系统底层。然后，你声明其他层，比如说Web服务器和脚本运行时环境。一旦定义好了容器，就可以在已定义容器的基础上构建映像。映像是容器的模板，你可以在一个或多个主机上重复使用它。</p>

<p>图5表明了主机运行CoreOS、使用Docker作为容器管理器的一种场景。有三个容器在主机上运行。一个容器使用Debian作为基本的操作系统层，Apache用作网站服务器，PHP 5.5用作脚本运行时环境，还使用自定义PHP应用程序（已为它构建了容器）。另一个容器用于额外的自定义PHP应用程序，使用nginx作为网站服务器，PHP 5.6作为脚本解释器，它们都在RHEL基本映像上运行。最后，第三个容器有一个JSP应用程序在Tomcat和Apache上运行，位于Ubuntu基本映像上。</p>

<p><img src="/images/2015/10/Contain5.jpg" alt="图5" /></p>

<ul>
  <li>图5：容器映像可以定义某个特殊主机为基本映像，然后分别为网站服务器、脚本运行时环境和脚本文件添加层。</li>
</ul>

<p>正如你所见，每个容器都不一样。不过，它们都作为孤立进程而并行驻留在主机上，可以利用CoreOS内核。没有实施硬件分配机制。所有环境资源都可以共享。</p>

<h3 id="section-5">了解注册中心</h3>

<p>容器映像存储在注册中心里面。对熟悉Java框架的人而言，注册中心概念好比是Maven注册中心概念。而.NET环境中的类似技术就是NuGet服务器。</p>

<p>有许多公开的注册中心，你可以将容器映像存储在里面。Docker有Docker Hub，还有其他公开的注册中心。另外，如今出现了越来越多的私有注册中心提供商。</p>

<p>使用注册中心几乎自动会收到神奇效果。你告诉容器管理器运行容器后，它会检查配置文件，确定容器需要哪几个层，然后检查注册中心上面的所需层映像，或者是默认注册中心，或者是你定义的注册中心。容器管理器会组装你的容器从注册中心需要获取的几个层，然后将容器装入到主机上。</p>

<p>使用注册中心让你在容器映像方面拥有高度可重用性。另外，使用容器映像意味着，你可以扩展应用程序，如下文所示。</p>

<h3 id="section-6">扩展容器</h3>

<p>容器在需要根据需求扩增或缩减资源的动态环境下表现很出色。不像虚拟机要花很长时间才能装入到主机环境，容器可以迅速装入。装入迅速，加上无所不在的容器注册中心，这意味着你可以迅速构建起高可用性、负载均衡的环境。</p>

<p>请看一下图6。该图显示了基于容器的应用程序集群环境。如今，让负载均衡系统协调从同一映像生成的许多容器之间的负载相当常见。实际上，负载均衡系统本身可以是个容器。换句话说，你可以使用nxginx容器作为负载均衡系统，负责协调相同应用程序节点组成的集群之间的流量。</p>

<p><img src="/images/2015/10/Contain6.jpg" alt="图6" /></p>

<ul>
  <li>图6：你可以使用充当负载均衡系统的容器来管理应用程序容器集群。</li>
</ul>

<h2 id="section-7">现在怎么办？</h2>

<p>容器生态系统在迅速发展壮大。比如说，有谷歌的开源项目Kubernetes，该项目提供了一个平台，可用于在企业层面，跨主机集群部署和扩展应用程序容器。另一个开源项目etcd让你可以共享容器之间的键值信息。如果你需要让容器使用统一的数据存储区或缓存，共享键值信息就很重要。还有fleet，它确保了这一点：如果你在诸多机器上运行许多同样的容器，其中一个机器出现故障，容器可以转移到另一个机器上。这在大规模计算环境下是一种非常有效的技术；在这种环境下，你的容器始终运行至关重要。这方面的项目和产品在迅速涌现。</p>

<p>正如我在文章开头所说，容器不会很快销声匿迹。实际上，微软、谷歌、IBM、红帽、亚马逊及其他许多知名科技公司已联合起来，组建了开放容器项目（Open Container Initiative），这是在Linux基金会下面成立的。设想一下：微软与Linux领导厂商合作。所以，如果雷德蒙德的人全力搭上容器这趟快车，容器进入到你我的世界只是个时间问题。所以，如果你还没有开始接触容器，现在正是时候。</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-09-30T00:00:00+00:00"><a href="/container/container-tech-stack/">September 30, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
预计阅读时间 ~1 分钟

      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/container/container-tech-stack/" rel="bookmark" title="Container技术栈概述" itemprop="url">Container技术栈概述</a></h1>
    
  </header>
  <div class="entry-content">
    <p>应用架构驱动着基础设施架构的发展。下一代应用架构聚焦于社交、移动、大数据、智能硬件，驱动应用向着更好的用户体验发展，也对传统的技术架构产生了冲击。</p>

<p>本文我们将看下新一代技术架构的元素，以及公司在下一代应用和基础设施中，应当如何进行架构选型。</p>

<p>在过去的6-12个月里，Container技术引起了企业的CIO、架构师和开发人员的极大兴趣。</p>

<ul>
  <li>Container技术引起CIO兴趣的原因在于，他们找到了向现代应用框架快速转型的方法，从而驱动业务的发展。</li>
  <li>对于架构师来说，Container技术增强了应用的可移植性，适用于混合云架构。</li>
  <li>而开发人员通过Container技术，可以快速地应用微服务架构，增强应用的可扩展性。</li>
</ul>

<p>DockerCon 和 Red Hat Summit 中，都曾讨论过这一趋势。但是每种新技术，都会带来新的挑战和利弊权衡。本文将对container技术架构中的元素逐一进行分析。</p>

<p>下图为Docker技术人员 Patrick Chanezon 总结的Container技术栈：</p>

<p><img src="/images/2015/09/docker-stack.png" alt="docker tech stack" /></p>

<p>在深入了解Container技术架构之前，有必要先理解以下几个基本问题：
   * Container技术非常适用于分布式应用框架中，这意味着底层的Container基础架构必须是模块化和非常灵活的；
   * 以下所探讨的核心概念，很多来源于如今的虚拟化架构，比如服务发现（Service Discovery），集群管理（Cluster Management）和资源调度（Resource Scheduling）；
   * 围绕整个container技术架构的公司生态也在快速发展，多数情况下，他们都从单一的工具开始，慢慢发展为一个全栈服务。</p>

<h2 id="container">深入Container技术架构</h2>

<p>从单一的Container到服务于产品的架构，需要一系列的工具和配置。从这些工具和配置上，我们可以看出下一代基于Container的应用需要哪些组件：</p>

<p>首先，要进行以下声明：
  * 所有这些组件都不是硬件的，也不依赖于云服务；
  * 在实现时，可能会结合一些组件到一个软件中；
  * 并非所有组件都是必须的。</p>

<p>下面是对整个技术栈自下而上的分析。</p>

<h3 id="devops">DevOps工具</h3>

<p>叫“开发工具”和“运维工具”更加直观，他们运行在本地机器上，用来启动Container，虚拟机或初始化应用包。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Hashicorp Vagrant，Docker Machine，VMware AppCatalyst, Shippable, Wercker
</code></pre>
</div>

<h3 id="vm">物理宿主机（或VM）</h3>

<p>Container实际运行的机器，可能是一个本地的笔记本电脑，一个数据服务器或一个公有云实例。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>VMware ESX，Microsoft Hyper-V，KVM，LXD
</code></pre>
</div>

<h3 id="container-os">Container OS</h3>

<p>负责和底层物理宿主机交互的操作系统（Linux或Windows），还负责提供所有container共享的OS级别的服务。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>CoreOS，RedHat Atomic Host，Rancher OS，Canonical Snappy，VMware Photo
</code></pre>
</div>

<h3 id="container-runtime">Container Runtime</h3>

<p>创建、启动、停止、销毁Container的软件层。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Docker，Rkt，Lattice
</code></pre>
</div>

<h3 id="container-1">Container</h3>

<p>管理着应用和Container OS之间的交互。也有人将其类比为虚拟机，但是container并不包含一个完整的操作系统。</p>

<h3 id="marketplace">Marketplace/镜像管理</h3>

<p>储存和管理container镜像的服务器（自己搭建或采用云端的SaaS应用）。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Docker Registry，CoreOS Registry
</code></pre>
</div>

<h3 id="configuration-management">配置管理（Configuration Management）</h3>

<p>管理和自动化配置文件和部署的工具。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>比如Ansible，Chef，Puppet，Docker Compose，Terraform
</code></pre>
</div>

<h3 id="container-networking">Container Networking</h3>

<p>SDN，管理container之间包路由的网络框架。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Docker Networking，WeaveWorks，Flannel (CoreOS), Calico
</code></pre>
</div>

<h3 id="container-2">Container集群管理</h3>

<p>帮助建立Container集群，形成服务，管理集群资源，保障可用性。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Docker Swarm, Hashicorp Serf
</code></pre>
</div>

<h3 id="section">服务发现</h3>

<p>随着更多的元素/微服务 被加入到应用中，找到这些服务并确认其是否可用变得很困难。服务发现可以在其加入网络中时，管理广播和服务许可。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Docker Swarm, Hashicorp Serf
</code></pre>
</div>

<h3 id="container-">Container 调度</h3>

<p>这项服务保障了container在宿主机中处于最高效的位置，容量规划，失败时重启container，需求变化时扩展应用等。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Kubernetes，Mesos
</code></pre>
</div>

<h3 id="section-1">应用调度</h3>

<p>和container调度的功能类似，是一系列面向应用的服务，描述应用被部署时所需的资源，时间，依赖等。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Marathon，Chronos，Hadoop，Spark
</code></pre>
</div>

<h3 id="section-2">安全</h3>

<p>在container架构中，同样需要所有的安全组件，从OS到认证服务，到数据管理。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>CoreOS Linux，Intel Clear Containers，Docker Notary，Hashicorp Vault, OpenSCAP, Twistlock, Scalock, Conjur, Lynis
</code></pre>
</div>

<h3 id="section-3">日志管理</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>Docker logs, logspout
</code></pre>
</div>

<h3 id="section-4">监控/可视化</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>Docker ps/top/stats, Docker stats API, sysdig, cAdvisor, Weave Scope
</code></pre>
</div>

<h3 id="container-3">Container实现——灵活性，交互性以及挑战</h3>

<p>对于企业来说，Container技术的挑战之一在于，选择Container技术栈意味着舍弃传统的，由ISV提供的一站式“单块架构”，通常会令企业望而生畏。</p>

<p>第二个挑战在于，初创公司常常将个人项目作为工具，许多情况下，要么是某公司在主导这个项目，要么由一个开源社区主导。</p>

<p>第三个挑战在于许多工具是彼此协作和可替代的。许多早期用户会试用不同项目的组件，而不是由一个供应商或开源项目提供的技术栈。短期来讲，有助于早期采用者实现灵活性和技术的多样性。长期来看，不利于企业对稳定环境的需求，同时也会增加对新技术的学习成本。相关的公有云服务，比如Amazon Elastic Cloud Services和 Google Container Engine，可以帮助用户屏蔽技术上的复杂性。</p>

<h2 id="section-5">总结</h2>

<p>Container技术和架构产生和发展都很迅速。许多初创企业都在驱动新工具和框架的产生，能够将合适的架构组件组合起来的技术，将为企业带来很多优势。不管基于已有的基础架构还是公有云，随着更多的解决方案级别的产品被推向市场，Container技术的发展脉络也将逐步清晰。</p>

<p>本文译自wikibon文章《Evolving Container Architectures》，原文请点击 <a href="http://wikibon.com/evolving-container-architectures/">阅读原文</a></p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
      <div class="entry-image-index">
        <a href="/container/redhat-openshift-v3-paas/" title="红帽的OpenShift V3进入市场"><img src="/images/morning_overview.png" alt="红帽的OpenShift V3进入市场"></a>
      </div><!-- /.entry-image -->
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-09-29T16:00:00+00:00"><a href="/container/redhat-openshift-v3-paas/">September 29, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
预计阅读时间 ~1 分钟

      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/container/redhat-openshift-v3-paas/" rel="bookmark" title="红帽的OpenShift V3进入市场" itemprop="url">红帽的OpenShift V3进入市场</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Red Hat在今年7月底的红帽峰会上发布了重要的战略级新产品 OpenShift v3；没错是v3。由于它和v2相比是重新基于Docker相关技术开发的，也就是说是实际上的 v 1.0; 红帽在这样的市场氛围里是不会在Docker方面没有作为的。不仅如此，还发布了与之配套的 Red Hat Enterprise Linux Atomic Host 作为容器运行的专有主机平台。</p>

<p>相关这个红帽大会的ppt 可以在这里下载 [http://www.redhat.com/summit/2015/presentations/ ](http://www.redhat.com/summit/2015/presentations/</p>

<p>作为这个新产品的发布，全球的roadshow是必须的，在中国也做了，相关资料可以在这里下载：</p>

<ol>
  <li>红帽中国网站  <a href="http://chinahall.redhat.com/productInformation/index.jhtml">http://chinahall.redhat.com/productInformation/index.jhtml</a></li>
  <li>OpenShift v3 roadshow 网站  <a href="http://training.runcloudrun.com/roadshow/">http://training.runcloudrun.com/roadshow/</a></li>
</ol>

<p>在中国做Roadshow的重量级人物是Ashesh Badani （红帽云产品事业部的GM）</p>

<p><img src="/images/2015/09/AsheshBadani-linkedin.jpg" alt="Ashesh Badani" /></p>

<ul>
  <li><a href="https://www.linkedin.com/profile/view?id=ADEAAAAAL18BB78IcUAmQa01ERGH4igDOiUfVc8&amp;authType=NAME_SEARCH&amp;authToken=-2iD&amp;locale=en_US&amp;srchid=258886861443620960498&amp;srchindex=1&amp;srchtotal=1&amp;trk=vsrp_people_res_name&amp;trkInfo=VSRPsearchId%3A258886861443620960498%2CVSRPtargetId%3A12127%2CVSRPcmpt%3Aprimary%2CVSRPnm%3Atrue%2CauthType%3ANAME_SEARCH">他在Linkedin的页面</a></li>
</ul>

<p>在中国期间他接受了CSDN的专访，专访内容如下， <a href="http://www.csdn.net/article/2015-09-28/2825811">转自CSDN网站</a></p>

<p>Ashesh Badani首先表示，红帽一直坚信软件会颠覆各行各业，每一家公司最终都可能成为软件公司，不能参与到颠覆大潮的公司，就会被别人颠覆。</p>

<p>他认为，软件市场未来的盈利点在PaaS和SaaS层，PaaS的利润率将在40%到60%之间。而面向DevOps的PaaS，需要集成对SDN，以及Docker、Kubernetes等新兴技术的支持，把公有云的体验通过开源技术带到企业私有云环境里，同时兼容现有的技术架构，这是因为混合云同样是未来的一大趋势，应用是分布式应用，它既可以存在于传统环境中，也可以在异构环境中。红帽OpenShift的卖点，就是借助于容器技术，把应用开发速度和运营效率结合起来，充分体现DevOps模式的高效性。</p>

<p>Ashesh Badani还回答了OpenShift与CloudFoundry竞争的问题。他表示，CloudFoundry提出来了一套兼容Docker格式的技术，但并不是Docker，并且对传统有状态的应用程序的处理技术不是很清晰；最关键的，是目前OpenShift 3已经是GA，已经可以发行给企业客户使用，而CloudFoundry并没有GA。</p>

<h2 id="section">云计算市场趋势</h2>

<p>Ashesh Badani分析了如下的云计算市场趋势：</p>

<ol>
  <li>PaaS市场的竞争。高盛与Gartner共同进行的一项调查显示，IaaS和PaaS未来五年的复合增长率将会达到30%。但由于亚马逊、谷歌、微软的出现，传统软件行业面临着很多来自价格的压力，要向着份额更多、利润率更大的行业领域发展，比如PaaS和SaaS方向。根据行业分析，IaaS的利润率在5%到20%之间，而PaaS的利润率更是在40%到60%之间。</li>
  <li>越来越多的工作负载向云迁移。在未来五年，会有更多的工作负载和流量向云端迁移。根据Gartner的预测，到2020年混合云结构会成型，其中一部分是我们传统的架构，此外还有私有云、公有云两大组成部分。</li>
  <li>容器技术备受关注。因为容器技术具备高敏捷性、灵活性，并且它的效率非常高。</li>
  <li>微服务架构。SaaS和服务提供商都非常关注微服务的概念，把过去一套服务分隔成微小的服务单元，这样能够大大增加服务的灵活性和灵敏度。</li>
  <li>CIO主要关注两个话题：1.关于价格成本的压力；2. 关于DevOps模式。DevOps模式可以使他们的操作更加灵活。</li>
</ol>

<p>面向DevOps，红帽PaaS产品OpenShift的设计理念包括：</p>

<ul>
  <li>OpenShift具有自助式特征，很多事情它都可以自动完成。</li>
  <li>OpenShift支持多语言、多框架，不管是Java，还是Ruby。</li>
  <li>支持自动化和团队协调与协作能力，在运营方面可以达到较高的可靠性、安全性、可预测性以及可扩展性。</li>
  <li>一切都是基于开源，都可以在开源社区中分享。同时尽量让它基于一种统一的标准，以免出现被锁定的现象。</li>
</ul>

<h2 id="openshift-3">OpenShift 3的主要特点</h2>

<p>红帽公司在6月份发布了OpenShift 3，其首要目的就是保证平台上大量的功能模块和组件具备跨平台、跨环境的可迁移性。此外，作为一个轻量级操作系统，OpenShift 3也充分使用了容器技术。并希望该技术也能够应用在红帽其它产品上。在初始阶段就已经设计，让容器技术使用行业标准的编排和管理工具Kubernetes，从而得到一个很好的服务和生态系统。</p>

<p>OpenShift 3集成了Docker技术， Docker格式任何的镜像都可以在OpenShift 3上来运行，可以更快地对软件进行打包，然后在红帽的平台上运行。另外有一个Atomic部署模式，只有在Docker或者镜像里面发生了变化，它才会进行变动，在其它时候就不会浪费时间和资源。这也使平台有了一个更大的生态系统——Docker hub上面可以看到来自于很多软件公司的几百甚至几千个镜像。</p>

<p>Ashesh Badani强调了使用容器技术的主要好处：</p>

<ul>
  <li>减少基础设施的成本。一般而言，在一个VM上运行应用程序时，虚拟机容量被浪费掉。而当运用了容器技术，一个VM上可以运行几百个或者更多的容器，容量的使用率和效率也会大大的提高，而且这些容器是由我们自己进行管理的，可以有更多的主动权。</li>
  <li>由于是轻量级的操作系统，所以对开发者来说体验是非常好的，因为它的开发速度加快了很多。</li>
  <li>从运营的角度来说，也更安全，而且运营的效率和管理效率也会更高。</li>
</ul>

<p>为保证公有云中的安全性，镜像的可信任，红帽已经在和几百个ISV软件提供商进行容器认证方面的合作，并为提供一些开发包，如红帽的容器开发包工具，使他们能够更容易的创建容器。此外，红帽的Kinect计划，在实际操作中能够帮助合作伙伴来分享他们在镜像或容器方面的一些最佳方法。他们可以列出镜像目录，或者直接到红帽注册器进行注册。</p>

<p>具体的方法，就是镜像的内容和元数据是分开的（镜像元数据包含谁创造了镜像、这些镜像之间是怎样进行互动等信息）。在搜索一个镜像的时候，它就会根据镜像元数据中包含的信息来你匹配搜索结果。然后再根据搜索结果把内容提出来，再和搜索结果的元数据进行匹配。</p>

<p>当有复杂应用的时候，就会需要多个容器，并且他们之间需要互相配合。所以对于一个运行复杂应用的平台来说，它会涉及到多个云环境。在这种情况下，我们就需要编配很多容器。红帽利用了谷歌的Kubernetes管理技术来编配和管理容器。它的管理方式主要是管理一些超大规模并且有多个容器的环境，尤其是在主机集群的环境下，能更好的发挥它的管理作用。比如其中一个容器要宕掉的话，很快其它的容器就会填补上，这种调配和编配能力非常强。它把这层抽象出来，而且是基于预先设定的规则进行处理的。</p>

<p>涉及混合云的环境还需要跨主机、跨平台、跨环境来管理这些容器。</p>

<ol>
  <li>在运行这些容器的时候，红帽还可以根据不同客户的不同规则和需求，把它分为不同的区域，在不同的区域之间进行容器的管理。</li>
  <li>对于多个容器运行在多个主机的情况，还需要解决IP寻址和SDN的问题。红帽通过内置OpenShift OVS产品来支持SDN，接下来还会支持包括思科在内的新的虚拟网络技术。</li>
  <li>存储扩展也涉及多种选择，比如说NFS的扩展方式，或者像亚马逊、谷歌所提供的其它一些云存储方式，以确保容器宕掉的时候不会因为没有持久化的存储而丢失数据。</li>
</ol>

<p>不过，一个实际的问题，是如果现在企业使用的Git来管理它的代码，使用Jenkens来做CI，那么他们用OpenShift就会非常得心应手，很好迁移。但如果企业用的是其它的源代码库，迁移到OpenShift应该注意哪些方面的问题呢？</p>

<p>Ashesh Badani认为，这其实很简单，包括网络、存储和源代码管理，目前整个应用程序是一种框架型的，都是标准接口模式，要想支持新的东西，只要有人去实现就可以了。至于是不是红帽要去开发SVN、CVS的支持，就要看有没有这种诉求。他表示，绝大多数软件开发都是社区模式，只要有人对这个方向感兴趣，并且能够做出足够好的贡献，红帽就会把它们放到一起。</p>

<p>换言之，企业用户如果想支持自己内部传统的某些东西，只要遵循这个标准去开发就可以了。就Jenkens而言，Jenkens公司现在与红帽是技术合作伙伴关系，可以自己开发一个接口和红帽的平台进行对接。</p>

<h2 id="openshiftkubernetes">OpenShift与Kubernetes</h2>

<p>Ashesh Badani表示，整个容器技术是由三部分组成的，其中Cgroup和NameSpace这两部分技术是由谷歌提出的，但是谷歌并没有提出一个完整的容器解决方案。由谷歌提供的这两个基础技术跟红帽结合在一起成就了Linux Container技术。谷歌提供的是容器编排的技术，是构建在容器之上的，但是谷歌的解决方案只是到了容器编排这一层，在这个基础上红帽提供了PaaS的方案。可以说谷歌提供的是细节技术，红帽提供的是整体技术。</p>

<p>其实目前在中间编排这层上也还有其它的选择，但是目前在市场上最有影响力的是谷歌。所以红帽选择最成熟的技术。现在谷歌尝试解决问题的前提仍然是应用要运行在其数据中心里面，但是红帽已经把公有云的体验通过开源技术带到企业私有云环境里，这一点是红帽和谷歌的不同之处。</p>

<h2 id="openshift-3-1">OpenShift 3案例</h2>

<p>Ashesh Badani分享了一个OpenShift 3的客户案例——欧洲旅游订票业务公司——Amadeus（类似于中国的中航信+携程+去哪网），其在线机票订购量占全球总业务量的95%，还需要处理酒店预订、租车业务等。Amadeus会不断收到来自全球的数据更新需求，需要足够快的反应速度。另外还要保证高度的一致性，因为客户会从任何地方接入多种系统，比如航空系统、旅店系统、旅行社系统甚至保险系统。</p>

<p>因为它的处理量非常大，在高峰期每秒可能会接收21万个请求，同时可能需要处理的应用服务器达上千个。他们要如何应对呢？首先，Amadeus需要建立一个非常庞大的分布式系统，这当中承载着5000多个微服务。这些可能在传统数据中心来部署，也可能在私有云或者公有云的环境下部署。在目前的状态下，它要运行几千台X86服务器。现在针对具体的任务或者请求，Amadeus有事先设定好的配置，而且改变起来并没有那么灵活，这也是他们的挑战之一。Amadeus现在想要做的就是改变这样一种状态，也就是说把那些运行的数据和运行地点分开，把所有的服务器作为一个整体来进行管理，任何一个任务在任何服务器上都能运行，也可以在任何的集群来启动这个任务。</p>

<p>当红帽公布V3的时候，Amadeus也发布了基于OpenShift V3的云服务平台，并充分利用了容器技术和Kubernetes容器编排技术。Amadeus觉得Kubernetes容器编排技术非常强大，可以根据事先设定好的规则进行编排，而且具备非常强的自愈能力，一旦某一个容器宕掉，就可以自动进行另一种编排管理。有了容器技术，就非常容易在不同环境下进行部署。</p>

<p>从开发到上线再到最后的产品，他们的整个流程非常清晰，而且非常统一。从开发环境转变到不同的IaaS环境，像公有云、私有云等等，最终Amadeus生产环境是基于OpenStack或者其它。红帽和Amadeus已经进行了一年多的合作，双方的软件工程师交叉在双方的团队中工作。</p>

<h2 id="openshift-vs-cloudfoudry">OpenShift vs CloudFoudry</h2>

<p>OpenShift与CloudFoudry是两大开源PaaS，后者在中国也有一些案例，红帽如何看待OpenShift与CloudFoudry的竞争？</p>

<p>Ashesh Badani从如下几点进行了比较，核心观点是说，红帽的一切都是基于最受认可的开源技术构建，生态支持更加强大，而CloudFoundry则趋于自成体系的专有软件，但以前自成体系的微软现在都已经拥抱开源。</p>

<ol>
  <li>技术方面：第一，OpenShift 3底层容器技术是Docker，CloudFoundry提出来了一套兼容Docker格式的技术，但并不是Docker，“是宝马”和“像宝马”是两回事。第二，到目前为止，CloudFoundry解决问题是云化的应用程序可以并行在它上面，但是对于传统的有状态的应用程序怎么处理， CloudFoundry并没有给出一个清晰的技术性方案，相比之下红帽是给出了解决方案的。</li>
  <li>市场方面：CloudFoundry在国内有一些应用案例。但实际上CloudFoundry背后的Heroku公司，大概在去年12月份全球裁员80人左右。如果它发展足够好的话，肯定会扩大阵容（当然这也是和大数据相关的，它之前失败的大数据投资造成了这种损失，云计算是另外一个话题）。反观红帽，过去12年每一个季度都在持续增长，整体客户数量和市场份额增速也许不像友商发展的这么快，但是红帽非常清晰地知道每个项目内容及进程，以及红帽在其中所作出的努力和结果。包括OpenShift Online里面有多少个应用程序，有多少人注册，这些信息是可以公开并讨论的。对于CloudFoundry，目前很难详细的描述清楚，这些具体案例是怎么做的、具体做了哪些、做了多少。尽管确实在国内能够听到许多关于他们的市场声音，而且他们确实聚集了很多开发人员和社区人员在做这个事情。</li>
  <li>社区基础：在Docker社区里面，除了Docker公司之外，红帽在企业里的贡献程度是位居第二的。这方面跟Heroku一点关系都没有。Pivotal还在做自己的那一套技术。大家都认为Docker是一个方向，也许Pivotal做的东西更好，但是这个技术没有被大家认可。另外CloudFoundry自己有一些编排技术，但是红帽用的是谷歌的编排技术，这个编排技术在整个社区里面被公认为是最好的。在Kubernetes社区，红帽是仅次于谷歌公司之后的第二大贡献者。</li>
  <li>产品就绪：最关键一点，目前OpenShift 3已经是GA了，已经可以发行给企业客户来使用，但是CloudFoundry并没有GA。</li>
  <li>路线选择：红帽是一家开源公司，是社区驱动的。而Pivotal在CloudFoundry产品上越来越趋向于传统的专有软件公司，就是说它所有的东西，从底层技术到中间技术，再到上层技术，都自成体系。其实传统公司有传统公司的优势，但开源公司有开源的优势，只不过红帽一直保持开源的思路，通过开源的方式，充分把企业客户提出的要求，在上游社区中得以体现。这样的社区可以保证例如OpenShift这样的应用服务，不仅来自于红帽，也有来自于其它社区的合作伙伴以及ISV的贡献。</li>
</ol>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-09-26T16:00:00+00:00"><a href="/container/docker-come-to-china/">September 26, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
预计阅读时间 ~1 分钟

      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/container/docker-come-to-china/" rel="bookmark" title="Docker官方进军中国" itemprop="url">Docker官方进军中国</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Docker 是一种基于轻量级虚拟化技术 LXC 开发的容器管理技术，它通过高级 API 为进程单独提供了一个轻量级的虚拟环境。Docker 以其方便、快捷、高效的运行方式，获得了很多公司的青睐。</p>

<p>2015 五一假期，Docker 公司宣布扩大在中国的办事处，招聘中国区主管，负责国内日常事务的运作、与美国管理层合作拓展中国市场。国内的开发者社区已经对 Docker 技术很熟悉了，但这次Docker品牌的所有者正式进入中国，意味深长。这份声明对中国的 Docker 社区发展会产生怎样的影响？如何评价这次进军中国的官方行为？让我们来解读一下。</p>

<p>转帖：<a href="http://www.infoq.com/cn/articles/docker-to-china">http://www.infoq.com/cn/articles/docker-to-china</a></p>

<h2 id="docker">Docker官方为什么进军中国？</h2>

<p>长大了——对于大部分云计算厂商来说，中国是除美国之外的第二大市场，这也是国外的各大云厂商一直在竭力落地中国的原因。而作为云计算的某种意义上的颠覆者，Docker公司已经度过了两岁生日，并且势头如日中天，在可见的未来，暂时看不到能够撼动其地位的其他技术，所以进军中国理所当然。其官方要加强Docker技术在中国的传播和落地，促进和国内IT公司的合作，确立其在中国的容器技术领导地位，找到和获取更多的商机和利益。</p>

<p>有钱了——由此，我们也可以解释为何Docker频频融资。就在上月中旬，Docker公司宣布获得9500万美元的D轮融资，与很多企业融资处境不同的是，Docker公司并没有在资金方面有很迫切的需求。目前，公司仍然在使用B轮融资的资金作为花费支出。公司首席执行官Ben Golub在采访时曾表示，（融资）是为了确保有足够的资金应对公司未来的重大发展机遇。而“进军中国”无疑是机遇之一，而且中国的市场拓展和竞争是需要靠烧钱来维持的，现在有了足够的粮草，Docker公司也有胆进军中国市场。</p>

<p>侵权了——除此之外，国内的社区对于Docker品牌的使用也是Docker公司最直接的原因之一。众所周知，Docker技术在中国的传播一直处于“野蛮生长”阶段，从个人到社区再到大小公司，都在通过各种形式讨论Docker，而其中一些形式比如会议和网站等以Docker冠名（感兴趣的读者可以搜索Docker公司的官方声明，里面专门有一段），这些方式从法律上讲侵犯了Docker公司的权利，其担心长期下去局面得不到控制，分不到利益的蛋糕，或者失去主导地位。</p>

<h2 id="section">进军的时机合适吗？</h2>

<p>这个很难讲，鱼和熊掌不可兼得。我们可以分析一下进入早晚的优缺点。</p>

<ul>
  <li>
    <p>早进入</p>
  </li>
  <li>优点：及时抓住Docker品牌和技术在中国的主导权，清理国内各种支流，以统一的形式和声音传播Docker。</li>
  <li>
    <p>缺点：以中国复杂的IT发展环境，年轻的Docker公司是否有能力驾驭Docker技术在国内的发展方向，能否和国内的技术人、技术社区合作共赢，是个很大的问题。</p>
  </li>
  <li>
    <p>晚进入</p>

    <ul>
      <li>优点：等Docker技术和商业模式在国内发展相对成熟，以法律的大棒扫除杂音，坐享成功的果实</li>
      <li>缺点：同样是中国复杂的IT发展环境，Docker公司能否有足够的能力和手段收割果实而不是被收割，同样是巨大的挑战。</li>
    </ul>
  </li>
</ul>

<p>目前看来，Docker公司选择了前者——早进入，而且也意识到了问题的严重性，在中国主管（Director）的招聘启事，特别强调了这是一个富于挑战性和关键性的职位，Be the face of Docker China，担子不轻。</p>

<h2 id="section-1">对国内技术人和社区有什么影响？</h2>

<p>对于技术人来说，大家会看到更加系统化的Docker活动出现在中国各地，我们也期望Docker公司能够担当起相应的职责来，促进而不是限制技术的发展。</p>

<p>国内的技术社区在学习和推广Docker技术时对Docker名字的使用需要更加小心一点，毕竟Docker品牌的所有者已经落地中国，目前Docker已经启动了对国内相关技术活动的授权，在其授权之下进行的活动，Docker公司是支持的。</p>

<p>除此之外的活动主办方要谨慎一些，尽早搞清楚是否侵权，别等着自己辛苦打造的事业起来之后，因为一些法律问题而受影响。如果不敢用“Docker”，那么“容器”也许是个不错的选择。</p>

<h2 id="section-2">结尾</h2>

<p>就在发布中国区主管招聘启事的当天，我正在旧金山微软Build大会的现场，彼时Docker公司CEO Ben Golub正上台与Microsoft Azure的负责人握手致意，宣布与微软的合作。现在想来，也许Docker与其合作的不应该仅仅是技术，更多的是应该学习微软深耕中国几十年的运营经验。</p>

<p>总的来说，Docker公司此时进入中国似乎是个必然的选择，不过前面是条漫长而又艰巨的路，好不好走、能不能走过去还要观察，Docker技术一定会发扬光大，Docker公司则需要继续努力。</p>

<p>Docker技术相关数据</p>

<ul>
  <li>诞生两年</li>
  <li>贡献者数量1200+</li>
  <li>Hub中利用Docker的应用程序10万+</li>
  <li>容器的下载量3亿+</li>
  <li>GitHub上Docker相关的项目32000+</li>
</ul>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2015-09-26T16:00:00+00:00"><a href="/container-runtime/docker-1-8-release/">September 26, 2015</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Martin Liu">Martin Liu</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
预计阅读时间 ~1 分钟

      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/container-runtime/docker-1-8-release/" rel="bookmark" title="Docker 1.8发布带来的新工具" itemprop="url">Docker 1.8发布带来的新工具</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Docker公司宣布Docker 1.8发布，该版本包括工具的新增和更新，同时带来了新的引擎特性。Docker工具箱（Docker Toolbox）提供了打包的系统，目标是成为“获取和使用Docker开发环境运行的最快方式”，并替换Boot2Docker。Docker内容信任（Docker Content Trust）是Docker引擎最重大的变化，它提供了镜像签名和验证。</p>

<p>Docker工具箱为Windows和Mac用户捆绑了这些组件：</p>

<ul>
  <li>VirtualBox：运行包含Docker引擎的轻量Linux虚拟机</li>
  <li>Docker Machine：一个配置工具，用于将Docker安装到VirtualBox（同样可以将Docker安装到多个云服务上）。</li>
  <li>操作系统使用的Docker客户端</li>
  <li>Kitematic：Docker图形用户界面</li>
  <li>Mac版本包括Docker Compose合成工具（来自他们为Fig收购的Orchard Labs），帮助多容器应用配置。</li>
</ul>

<p>安装指南为使用Boot2Docker或者已经安装VirtualBox的用户提供了迁移指导。在Windows和Mac系统上使用其他虚拟化环境的，如Hyper-V、Parallels、VMware工作站或Fusion平台，没有包括在迁移指导内（和这些平台的潜在冲突也没有提及）。Windows 10暂时还不支持。</p>

<p>Docker内容信任基于Notary项目，它是更新框架（The Update Framework，TUF）的一种“自以为是的实现”，是一个“可以添加到软件更新器上的弹性安全框架”。它通过使用签名，为在不安全介质上分发镜像提供安全保障。它同样提供了新鲜度保证，因此当有人在下载一个镜像时，能够知道不会获取到可能包含隐患的旧版本。这套系统使用了三种密钥类型：用于离线保存的根内容信任密钥、每个镜像仓库独立的标签密钥和时间戳密钥。当内容信任开启时（目前由环境变量控制），离线密钥和标签密钥在镜像第一次推送是自动生成。该系统还没有完全集成到Docker Hub服务上，因此自动构建无法签名。Docker Hub中的库镜像（如Ubuntu）目前已经签名，对推送到Docker Hub的用户镜像也可以进行签名了。Docker公司的David Lawrence提供一个在线聚会上录制的演示。</p>

<p><img src="/images/2015/09/1ContentTrustKeys.jpg" alt="docker Notary" /></p>

<p>Docker引擎更新后，将对卷插件的支持从“实验性”改成了“稳定”，表明存储能够和生态系统提供者提供的存储介质集成，如Blockbridge、Ceph、ClusterHQ、EMC和Portworx。日志驱动增加了一些特性，包括对Graylog扩展日志格式(Graylog Extended Log Format，GELF)支持、Fluentd和syslogd结合（从1.6版本开始支持）。由于有推送镜像相关缺陷，Docker 1.8.1已经发布，用于替换Docker 1.8.0。</p>

<p>由于docker二进制文件同时充当了客户端和后台，一些努力已经花费在在区分这两个角色和明确各自文档上。最显著的区别是“-d”命令行开关已经被废弃，转而使用“daemon”参数，后者也有了自己的帮助文档。目前也支持通过“docker cp”命令从宿主机向容器复制文件（之前版本已经支持从容器向宿主机复制文件）。</p>

<p>对于Linux用户，Debian和Ubuntu发行版有了新的apt仓库，RHEL、CentOS和Fedora有了新的yum仓库。两个仓库中的安装包，都从“lxc-docker”重命名称了“docker-engine”，主要考虑到Docker已经抛弃LXC作为默认执行驱动16个月，避免因此产生迷惑。切换到新的仓库需要特别小心，因为一些Docker配置文件中的自定义内容可能会丢失，且需要列出当前运行的容器时“docker”命令可能会不存在。</p>

<p>Docker的流程控制工具也已经更新，Compose升级到1.4版本，Machine和Swarm发布了0.4版本。这些工具新版本有许多功能提升，包括一些为了工具箱实现的功能，其中一些功能将会吸引那些通过类似Mesos将Docker运行在大规模集群中的用户。2.1版本的Docker注册中心已经发布，提供了更快的操作和一些新特性。</p>

<p>此次发布的重要主题是安全和易用性。前者主要针对大企业用户，后者主要目的是让更多开发者上手Docker。Docker将会找到自己的方式运行在Windows Server 2016上，对此现在已经有技术预览版。因此Docker公司无疑将会把目光投向Windows用户群。</p>

<p>转帖：http://www.infoq.com/cn/news/2015/09/Docker-1-8
原文：http://www.infoq.com/news/2015/08/Docker-1-8</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    
      
        <li><a href="/page2/" class="btn">前一页</a></li>
      
    

    
    
      <li><a href="">1</a></li>
    

    
    

    
    
    

    
      
        
        
        
        <li><a href="/page2/">2</a></li>
      
    
      
        <li><strong class="current-page">3</strong></li>
      
    
      
        
        
        
        <li><a href="/page4/">4</a></li>
      
    

    
    

    
      <li><a href="/page5/">5</a></li>
    

    
    
      <li><a href="/page4/" class="btn">下一页</a></li>
    
  </ul>
</div>


</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2016 Martin Liu. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>

  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.useso.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-68135493-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>


          

</body>
</html>